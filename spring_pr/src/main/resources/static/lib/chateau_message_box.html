<link rel="import" href="chateau_stomp/chateau_stomp_js.html">
<link rel="import" href="chateau_message_history.html">
<link rel="import" href="chateau_type_message.html">
<dom-module id="chateau-message-box">
    <style>
        .chatcontainer {
            height: 400px;
            width: 600px;
        }
    </style>
    <template>
        <chateau-stomp-js got_message_function="{{drawnewmessagefunction}}"
                          send_message_function="{{chateau_stomp_js_send_message_function}}"></chateau-stomp-js>
        <div class="chatcontainer">
            <chateau-message-history drawnewmessagefunction="{{drawnewmessagefunction}}"
                                     drawnewmymessagefunction="{{drawnewmymessagefunction}}"></chateau-message-history>
            <chateau-type-message typenewmessagefunction="{{typenewmessagefunction}}"></chateau-type-message>
        </div>
    </template>
    <script>
        Polymer({
            is: 'chateau-message-box',

            ready: function () {
                var element = this;
                this.typenewmessagefunction = function (str) {
                    element.drawnewmymessagefunction({"content": str, "date": "CURRENT_DATE"});
                    element.chateau_stomp_js_send_message_function({"content": str, "groupId": "1"});
                }
            }
        })
    </script>
</dom-module>